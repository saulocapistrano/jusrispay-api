<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="020-alter-payment-add-fine" author="jurispay">
        <addColumn tableName="payment">
            <column name="fine_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="fine_times" type="INTEGER">
                <constraints nullable="true"/>
            </column>
            <column name="fine_unit_amount" type="NUMERIC(19,2)">
                <constraints nullable="true"/>
            </column>
            <column name="fine_total_amount" type="NUMERIC(19,2)">
                <constraints nullable="true"/>
            </column>
        </addColumn>

        <addForeignKeyConstraint
            baseTableName="payment"
            baseColumnNames="fine_id"
            referencedTableName="fine"
            referencedColumnNames="id"
            constraintName="fk_payment_fine"/>

        <createIndex tableName="payment" indexName="idx_payment_fine_id">
            <column name="fine_id"/>
        </createIndex>
    </changeSet>

</databaseChangeLog>
